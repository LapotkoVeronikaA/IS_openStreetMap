{% extends "profile_base.html" %}

{% set breadcrumbs_extra = [('Редактирование', '#')] %}

{% block title %}Редактирование профиля{% endblock %}

{% block profile_content %}
<div class="card-modern p-4">
    <h2 class="h4 mb-4"><i class="fas fa-user-edit me-3"></i>Редактирование профиля</h2>
    <form method="POST">
        <div class="mb-3">
            <label class="form-label">Логин</label>
            <input type="text" name="username" class="form-control" value="{{ user.username }}" {% if not can_edit_all %}readonly{% endif %}>
            {% if not can_edit_all %}<div class="form-text">Изменение логина доступно только администратору.</div>{% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label">ФИО</label>
            <input type="text" name="full_name" class="form-control" value="{{ user.full_name or '' }}">
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Отдел</label>
                <input type="text" name="department" class="form-control" value="{{ user.department or '' }}">
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Должность</label>
                <input type="text" name="position" class="form-control" value="{{ user.position or '' }}">
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Контактная информация (Email, телефон)</label>
            <textarea name="contact_info" class="form-control" rows="2">{{ user.contact_info or '' }}</textarea>
        </div>
        
        <div class="d-flex justify-content-end gap-2 mt-4">
            <a href="{{ url_for('profile.view', user_id=user.id) }}" class="btn btn-outline-secondary">Отмена</a>
            <button type="submit" class="btn btn-primary"><i class="fas fa-save me-2"></i>Сохранить изменения</button>
        </div>
    </form>
</div>
{% endblock %}